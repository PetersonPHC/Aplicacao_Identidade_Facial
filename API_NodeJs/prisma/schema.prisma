generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      =  env("mysql://root:Gveloso15@localhost:3306/Registro_Database")
}

model empresa {
  CNPJ         String        @id @db.Char(14)
  NOMEFANTASIA String        @db.VarChar(35)
  CEP          Int
  UF           String        @db.Char(2)
  CIDADE       String        @db.VarChar(35)
  BAIRRO       String        @db.VarChar(35)
  LOGRADOURO   String        @db.VarChar(100)
  NUMERO       Int
  COMPLEMENTO  String?       @db.VarChar(50)
  DATACRIACAO  DateTime      @db.Date
  colaborador  colaborador[]
  usuario      usuario[]
  registro_ponto registro_ponto[]
}

model registro_ponto {
  MATRICULA_COLABORADOR String      @db.VarChar(36)
  CNPJ_EMPRESA          String      @db.Char(14)
  DATA                  DateTime    @db.DateTime(0)
  colaborador           colaborador @relation(fields: [MATRICULA_COLABORADOR, CNPJ_EMPRESA], references: [MATRICULA, CNPJ_EMPRESA])
  empresa               empresa     @relation(fields: [CNPJ_EMPRESA], references: [CNPJ])

  @@id([MATRICULA_COLABORADOR, CNPJ_EMPRESA, DATA])
  @@index([CNPJ_EMPRESA], map: "FK_REGISTRO_PONTO_EMPRESA")
}

model colaborador {
  MATRICULA       String          @db.VarChar(36)
  CNPJ_EMPRESA    String          @db.Char(14)
  NOME            String          @db.VarChar(100)
  CPF             String          @db.Char(11)
  RG              String          @db.Char(9)
  DATA_NASCIMENTO DateTime        @db.Date
  DATA_ADMISSAO   DateTime        @db.Date
  NIS             String          @db.Char(11)
  CTPS            String          @db.Char(11)
  CARGA_HORARIA   DateTime        @db.Time(0)
  CARGO           String          @db.VarChar(40)
  IMAGEM          Bytes?          @db.Blob
  BANCO_DE_HORAS  DateTime        @db.Time(0)
  empresa         empresa         @relation(fields: [CNPJ_EMPRESA], references: [CNPJ])
  usuario         usuario?
  registro_ponto  registro_ponto[]

  @@id([MATRICULA, CNPJ_EMPRESA])
  @@index([CNPJ_EMPRESA], map: "FK_COLABORADOR_CNPJ_EMPRESA")
}

model usuario {
  MATRICULA_COLABORADOR String      @db.VarChar(36)
  CNPJ_EMPRESA          String      @db.Char(14)
  SENHA                 String      @db.VarChar(100)
  ADMIN                 Boolean
  colaborador           colaborador @relation(fields: [MATRICULA_COLABORADOR, CNPJ_EMPRESA], references: [MATRICULA, CNPJ_EMPRESA])
  empresa               empresa     @relation(fields: [CNPJ_EMPRESA], references: [CNPJ])

  @@id([MATRICULA_COLABORADOR, CNPJ_EMPRESA])
  @@index([CNPJ_EMPRESA], map: "FK_USUARIO_EMPRESA")
}